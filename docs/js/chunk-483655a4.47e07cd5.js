(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-483655a4"],{"122f":function(t,e,s){"use strict";s("b320")},"1f4f":function(t,e,s){"use strict";s("8b37");var a=s("80d2"),i=s("7560"),l=s("58df");e["a"]=Object(l["a"])(i["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"6be8":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-class d-flex flex-column"},[s("h1",[t._v("Мой класс")]),s("nav",{staticClass:"my-class__nav d-flex flex-nowrap"},[s("div",{staticClass:"my-class__select-class"},[s("v-select",{attrs:{outlined:"",dense:"","append-icon":"mdi-chevron-down",items:t.classes,"item-text":"class_number","item-value":"id"},on:{change:t.getStudents},model:{value:t.classesSelect,callback:function(e){t.classesSelect=e},expression:"classesSelect"}},[t._v("Класс")])],1),s("Button",{on:{click:function(e){return t.modalOpen("add")}}},[t._v("Добавить нового ученика")])],1),s("div",{attrs:{id:"students-table"}},[s("v-simple-table",{staticClass:"table",scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("ФИО")]),s("th",{staticClass:"text-left"},[t._v("Логин")]),s("th",{staticClass:"text-left"},[t._v("Пароль")]),s("th")])]),s("tbody",t._l(t.students,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(e.full_name))]),s("td",[t._v(t._s(e.user.name))]),s("td",[t.isPrint?s("span",[t._v(t._s(e.user.password))]):s("input",{attrs:{readonly:"",type:t.showPassword===e.user.password?"text":"password"},domProps:{value:e.user.password}}),t._v(" "+t._s(e.isVisible)+" "),s("v-icon",{staticClass:"table__tool",on:{click:function(s){return t.togglePassword(e.user.password)}}},[t._v(" "+t._s(t.showPassword===e.user.password?"mdi-eye":"mdi-eye-off")+" ")])],1),s("td",{staticClass:"text-right"},[s("v-icon",{staticClass:"table__tool",on:{click:function(s){return t.modalOpen("edit",e)}}},[t._v("mdi-square-edit-outline")]),s("v-icon",{staticClass:"table__tool",on:{click:function(s){return t.modalOpen("delete",e)}}},[t._v("mdi-trash-can-outline")])],1)])})),0)]},proxy:!0}])})],1),s("Button",{staticClass:"align-self-end my-class__print-btn",on:{click:t.print}},[t._v("Печать логинов и паролей")]),s("v-dialog",{attrs:{width:"fit-content"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("modal-panel",t._b({on:{cancel:t.modalCancel,action:t.modalAction}},"modal-panel",t.modalProps,!1))],1)],1)},i=[],l=s("bc3a"),d=s.n(l),n=s("b2c7"),o={mounted(){this.classesSelect=this.classes[0].id,this.getStudents()},data(){return{showPassword:"",isPrint:!1,dialog:!1,action:"",classesSelect:"",editedStudent:null,modalProps:{},modalValidateRules:{required:function(t){return!!t||"Необходимо заполнить поле"}}}},computed:{students(){return this.$store.getters.students},classes(){return this.$store.getters.teacherClasses}},methods:{print(){this.isPrint=!0,this.$nextTick(()=>{this.$htmlToPaper("students-table",null,()=>{this.isPrint=!1})})},togglePassword(t){this.showPassword===t?this.showPassword=!1:this.showPassword=t},getStudents(){this.$store.dispatch("get",{getWhat:"students",id:this.classesSelect})},editStudent(t){return new Promise((e,s)=>{this.$store.dispatch("loadingOn"),d()({url:n["f"]+"/"+this.editedStudent.id,method:"put",data:{...t},headers:{Authorization:"Bearer "+this.$store.getters.token}}).then(t=>{this.getStudents(),this.$store.dispatch("loadingOff"),e(t)}).catch(t=>{this.$store.dispatch("loadingOff"),s(t)}),e()})},deleteStudent(){return new Promise((t,e)=>{this.$store.dispatch("loadingOn"),d()({url:n["f"]+"/"+this.editedStudent.id,method:"delete",headers:{Authorization:"Bearer "+this.$store.getters.token}}).then(e=>{this.getStudents(),this.$store.dispatch("loadingOff"),t(e)}).catch(t=>{this.$store.dispatch("loadingOff"),e(t)}),t()})},addStudent(t){return new Promise((e,s)=>{this.$store.dispatch("loadingOn"),d()({url:n["f"],method:"post",data:{...t},headers:{Authorization:"Bearer "+this.$store.getters.token}}).then(t=>{this.getStudents(),e(t)}).catch(t=>{s(t)}),this.$store.dispatch("loadingOff"),e()})},modalCancel(){this.dialog=!1},modalAction(t){switch(this.dialog=!1,this.action){case"add":{let e={full_name:t.full_name.value,student_class_id:this.classesSelect};this.addStudent(e);break}case"edit":{let e={full_name:t.full_name.value};this.editStudent(e);break}case"delete":this.deleteStudent()}},modalOpen(t,e=null){switch(e&&(this.editedStudent=e),this.action=t,t){case"add":this.modalProps={title:"Зарегистрировать ученика",inputs:{full_name:{label:"ФИО ученика",rules:[this.modalValidateRules.required],isTextField:!0,value:""}}};break;case"edit":this.modalProps={title:"Изменить ученика",text:this.editedStudent.full_name,inputs:{full_name:{label:"ФИО ученика",rules:[this.modalValidateRules.required],isTextField:!0,value:this.editedStudent.full_name}}};break;case"delete":this.modalProps={title:"Удалить ученика",text:"Вы действительно хотите удалить ученика "+this.editedStudent.full_name+" из системы ?",actionBtnText:"Удалить"};break}this.dialog=!0}}},r=o,c=(s("122f"),s("2877")),h=s("6544"),u=s.n(h),m=s("169a"),p=s("132d"),f=s("b974"),_=s("1f4f"),b=Object(c["a"])(r,a,i,!1,null,null,null);e["default"]=b.exports;u()(b,{VDialog:m["a"],VIcon:p["a"],VSelect:f["a"],VSimpleTable:_["a"]})},"8b37":function(t,e,s){},b320:function(t,e,s){}}]);
//# sourceMappingURL=chunk-483655a4.47e07cd5.js.map