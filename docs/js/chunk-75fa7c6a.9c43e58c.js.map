{"version":3,"sources":["webpack:///./src/views/Timetable/Timetable.vue?c16b","webpack:///./src/views/Timetable/Timetable.vue?4f3b","webpack:///src/views/Timetable/Timetable.vue","webpack:///./src/views/Timetable/Timetable.vue?5bbd","webpack:///./src/views/Timetable/Timetable.vue?1271"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","role","_v","attrs","classes","on","loadTimetable","model","value","callback","$$v","classesSelect","expression","_e","_s","$store","getters","classNumber","$event","date","_l","item","index","key","day","name","isEmpty","modalOpen","redirectToLesson","subject","teacher","full_name","class","dialog","_b","modalCancel","modalAction","modalProps","staticRenderFns","component","VDialog","VIcon","VSelect"],"mappings":"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AcJ,EAAIwC,GAAG,CAAC7B,GAAG,CAAC,OAASX,EAAIyC,YAAY,OAASzC,EAAI0C,cAAc,cAAc1C,EAAI2C,YAAW,KAAS,IAAI,IACj8EC,EAAkB,G,iCCoGtB,GACA,sBACA,4BACA,oBAEA,sCACA,qBACA,mBACA,oBAGA,OACA,OACA,UACA,UACA,cACA,cACA,iBACA,SACA,UACA,WACA,aACA,YACA,UACA,aAEA,MACA,cACA,cACA,eACA,gBACA,gBACA,gBACA,gBACA,iBAEA,qCAEA,oBACA,qBACA,yCAGA,eAGA,UACA,OACA,iCAEA,UACA,oCAEA,WACA,mCAIA,OAHA,cACA,qBAEA,GAEA,WACA,qCAEA,YACA,sCAEA,OACA,OACA,gBACA,eAEA,sCACA,iCAEA,yBACA,MACA,kDACA,KACA,GAGA,IAEA,cACA,iCACA,0BAEA,WAIA,SACA,0BACA,4BACA,sBAGA,0BACA,4BACA,sBAGA,aACA,0BACA,oBAGA,0BACA,4BAQA,gBACA,kBACA,aACA,4BACA,yBACA,UACA,SACA,eACA,MAEA,WACA,gBAEA,MAGA,4BACA,kBACA,oBAzBA,4BACA,oBACA,sBACA,wBAEA,oBAsBA,mCACA,+BAEA,OADA,yBACA,IAGA,eACA,QACA,0BACA,yCACA,KAGA,oBACA,oCAGA,YACA,0BACA,6CAGA,6BACA,UACA,GACA,kBACA,gBACA,WACA,YAGA,iBACA,oBACA,MACA,GACA,kBACA,gBACA,WACA,YAEA,UAEA,MAGA,CACA,aACA,qBACA,gBAIA,cAGA,UAEA,eACA,IACA,sCACA,SACA,qDAGA,UACA,qBACA,qCAEA,UACA,mCACA,oBAGA,aACA,IACA,eACA,SACA,qDAGA,UACA,qBACA,qCAEA,UACA,mCACA,oBAGA,cACA,eACA,oBAEA,eAGA,OAFA,eACA,kCACA,aACA,aACA,oBACA,mBACA,MAEA,WACA,OACA,+BACA,2BACA,2BACA,4CACA,kCACA,iBAEA,kBACA,mBACA,MAEA,WAGA,MAEA,YAGA,QAIA,oBAGA,OAFA,uBACA,cACA,GACA,aACA,iBACA,uBACA,iEACA,yBAEA,MAEA,UACA,iBACA,sBACA,QACA,SACA,gBACA,yCACA,kBACA,sBACA,UAEA,SACA,gBACA,yCACA,kBACA,sBACA,WAGA,kBAEA,MAEA,WACA,iBACA,wBACA,YAEA,MAEA,YACA,iBACA,2BACA,yBACA,aAEA,MAGA,gBAEA,oBACA,kCACA,yCACA,mBACA,cACA,sBCxakW,I,iFCQ9VC,EAAY,eACd,EACA9C,EACA6C,GACA,EACA,KACA,KACA,MAIa,aAAAC,EAAiB,QAOhC,IAAkBA,EAAW,CAACC,UAAA,KAAQC,QAAA,KAAMC,UAAA","file":"js/chunk-75fa7c6a.9c43e58c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timetable.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"timetable d-flex flex-column\"},[(_vm.role === 'admin')?_c('h1',[_vm._v(\"Изменить расписание\")]):_c('h1',[_vm._v(\"Расписание\")]),_c('nav',{staticClass:\"timetable__nav d-flex flex-nowrap\"},[(\n\t\t\t\t_vm.role === 'admin' || _vm.role === 'class_teacher' || _vm.role === 'teacher'\n\t\t\t)?_c('div',{staticClass:\"timetable__select-class\"},[_c('v-select',{attrs:{\"outlined\":\"\",\"dense\":\"\",\"append-icon\":\"mdi-chevron-down\",\"items\":_vm.classes,\"item-text\":\"class_number\",\"item-value\":\"id\"},on:{\"change\":_vm.loadTimetable},model:{value:(_vm.classesSelect),callback:function ($$v) {_vm.classesSelect=$$v},expression:\"classesSelect\"}},[_vm._v(\"Класс\")])],1):_vm._e(),(_vm.role === 'student')?_c('h2',[_vm._v(\" Мое расписание: \"+_vm._s(_vm.$store.getters.classNumber)+\" \")]):_vm._e()]),_c('div',{staticClass:\"timetable__carusel white--text d-flex justify-space-between align-center\"},[_c('v-icon',{attrs:{\"color\":\"white\"},on:{\"click\":function($event){return _vm.loadTimetable('down')}}},[_vm._v(\"mdi-arrow-left\")]),_vm._v(\" \"+_vm._s(_vm.date)+\" \"),_c('v-icon',{attrs:{\"color\":\"white\"},on:{\"click\":function($event){return _vm.loadTimetable('up')}}},[_vm._v(\"mdi-arrow-right\")])],1),_c('div',{staticClass:\"timetable__grid\"},[_c('div',{staticClass:\"timetable__time\"},_vm._l((_vm.time),function(item,index){return _c('div',{key:index},[_vm._v(_vm._s(item))])}),0),_c('div',{staticClass:\"timetable__days\"},_vm._l((_vm.days),function(item,index){return _c('div',{key:index},[_vm._v(_vm._s(item))])}),0),_c('div',{staticClass:\"timetable__lessons\"},_vm._l((_vm.lessons),function(day,name){return _c('div',{key:name,staticClass:\"timetable__lessons-column\"},_vm._l((day),function(item,index){return _c('div',{key:index,staticClass:\"timetable__cell\"},[(item.isEmpty && _vm.role === 'admin')?_c('div',{staticClass:\"timetable__cell-add\",on:{\"click\":function($event){return _vm.modalOpen('add', item)}}},[_c('v-icon',{attrs:{\"large\":\"\"}},[_vm._v(\"mdi-plus\")])],1):(item.isEmpty && _vm.role != 'admin')?_c('div',{staticClass:\"timetable__cell-empty\"}):_c('div',{staticClass:\"timetable__cell-lesson\"},[_c('div',{on:{\"click\":function($event){return _vm.redirectToLesson(item)}}},[(item.subject)?_c('p',[_vm._v(_vm._s(item.subject.name))]):_vm._e(),(item.teacher)?_c('i',[_vm._v(_vm._s(item.teacher.full_name))]):_vm._e()]),_c('v-icon',{staticClass:\"timetable__cell-lesson__icon-close\",class:{ 'd-none': _vm.role != 'admin' },attrs:{\"small\":\"\"},on:{\"click\":function($event){return _vm.modalOpen('delete', item)}}},[_vm._v(\"mdi-close\")])],1)])}),0)}),0)]),_c('v-dialog',{attrs:{\"width\":\"fit-content\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('modal-panel',_vm._b({on:{\"cancel\":_vm.modalCancel,\"action\":_vm.modalAction}},'modal-panel',_vm.modalProps,false))],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"timetable d-flex flex-column\">\r\n\t\t<h1 v-if=\"role === 'admin'\">Изменить расписание</h1>\r\n\t\t<h1 v-else>Расписание</h1>\r\n\t\t<nav class=\"timetable__nav d-flex flex-nowrap\">\r\n\t\t\t<!-- <Button @click=\"modalOpen('time')\">Настроить время</Button>\r\n\t\t\t<Button @click=\"modalOpen('quart')\">Настроить четверть</Button> -->\r\n\t\t\t<div\r\n\t\t\t\tclass=\"timetable__select-class\"\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\trole === 'admin' || role === 'class_teacher' || role === 'teacher'\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<v-select\r\n\t\t\t\t\toutlined\r\n\t\t\t\t\tdense\r\n\t\t\t\t\tappend-icon=\"mdi-chevron-down\"\r\n\t\t\t\t\tv-model=\"classesSelect\"\r\n\t\t\t\t\t:items=\"classes\"\r\n\t\t\t\t\titem-text=\"class_number\"\r\n\t\t\t\t\titem-value=\"id\"\r\n\t\t\t\t\t@change=\"loadTimetable\"\r\n\t\t\t\t\t>Класс</v-select\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t\t<h2 v-if=\"role === 'student'\">\r\n\t\t\t\tМое расписание: {{ $store.getters.classNumber }}\r\n\t\t\t</h2>\r\n\t\t</nav>\r\n\t\t<div\r\n\t\t\tclass=\"timetable__carusel white--text d-flex justify-space-between align-center\"\r\n\t\t>\r\n\t\t\t<v-icon color=\"white\" @click=\"loadTimetable('down')\"\r\n\t\t\t\t>mdi-arrow-left</v-icon\r\n\t\t\t>\r\n\t\t\t{{ date }}\r\n\t\t\t<v-icon color=\"white\" @click=\"loadTimetable('up')\"\r\n\t\t\t\t>mdi-arrow-right</v-icon\r\n\t\t\t>\r\n\t\t</div>\r\n\t\t<div class=\"timetable__grid\">\r\n\t\t\t<div class=\"timetable__time\">\r\n\t\t\t\t<div v-for=\"(item, index) in time\" :key=\"index\">{{ item }}</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"timetable__days\">\r\n\t\t\t\t<div v-for=\"(item, index) in days\" :key=\"index\">{{ item }}</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"timetable__lessons\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(day, name) in lessons\"\r\n\t\t\t\t\t:key=\"name\"\r\n\t\t\t\t\tclass=\"timetable__lessons-column\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in day\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"timetable__cell\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tv-if=\"item.isEmpty && role === 'admin'\"\r\n\t\t\t\t\t\t\tclass=\"timetable__cell-add\"\r\n\t\t\t\t\t\t\t@click=\"modalOpen('add', item)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon large>mdi-plus</v-icon>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tv-else-if=\"item.isEmpty && role != 'admin'\"\r\n\t\t\t\t\t\t\tclass=\"timetable__cell-empty\"\r\n\t\t\t\t\t\t></div>\r\n\r\n\t\t\t\t\t\t<div v-else class=\"timetable__cell-lesson\">\r\n\t\t\t\t\t\t\t<div @click=\"redirectToLesson(item)\">\r\n\t\t\t\t\t\t\t\t<p v-if=\"item.subject\">{{ item.subject.name }}</p>\r\n\t\t\t\t\t\t\t\t<i v-if=\"item.teacher\">{{ item.teacher.full_name }}</i>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<v-icon\r\n\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\tclass=\"timetable__cell-lesson__icon-close\"\r\n\t\t\t\t\t\t\t\t:class=\"{ 'd-none': role != 'admin' }\"\r\n\t\t\t\t\t\t\t\t@click=\"modalOpen('delete', item)\"\r\n\t\t\t\t\t\t\t\t>mdi-close</v-icon\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<v-dialog v-model=\"dialog\" width=\"fit-content\">\r\n\t\t\t<modal-panel\r\n\t\t\t\tv-on:cancel=\"modalCancel\"\r\n\t\t\t\tv-on:action=\"modalAction\"\r\n\t\t\t\tv-bind=\"modalProps\"\r\n\t\t\t>\r\n\t\t\t</modal-panel>\r\n\t\t</v-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { lessonsUrl } from \"@/store/urls.js\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n\tasync created() {\r\n\t\tawait this.$store.dispatch(\"get\", {\r\n\t\t\tgetWhat: \"classes\",\r\n\t\t});\r\n\t\tthis.classesSelect = this.classes[0].id;\r\n\t\tthis.loadTimetable();\r\n\t\tthis.getTeachers();\r\n\t\tthis.getSubjects();\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdialog: false,\r\n\t\t\taction: \"\",\r\n\t\t\tmodalProps: {},\r\n\t\t\teditedItem: \"\",\r\n\t\t\tclassesSelect: \"\",\r\n\t\t\tlessons: {\r\n\t\t\t\tmonday: \"\",\r\n\t\t\t\ttuesday: \"\",\r\n\t\t\t\twednesday: \"\",\r\n\t\t\t\tthursday: \"\",\r\n\t\t\t\tfriday: \"\",\r\n\t\t\t\tsaturday: \"\",\r\n\t\t\t},\r\n\t\t\ttime: [\r\n\t\t\t\t\"8:50 - 9:30\",\r\n\t\t\t\t\"8:00 - 8:40\",\r\n\t\t\t\t\"9:45 - 10:25\",\r\n\t\t\t\t\"10:40 - 11:20\",\r\n\t\t\t\t\"11:35 - 12:15\",\r\n\t\t\t\t\"12:25 - 13:05\",\r\n\t\t\t\t\"13:10 - 13:50\",\r\n\t\t\t\t\"14:00 - 14:40\",\r\n\t\t\t],\r\n\t\t\tdays: [\"Пн\", \"Вт\", \"Ср\", \"Чт\", \"Пт\", \"Сб\"],\r\n\r\n\t\t\tmodalValidateRules: {\r\n\t\t\t\trequired: function (value) {\r\n\t\t\t\t\treturn !!value || \"Необходимо заполнить поле\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tsubjectId: \"\",\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\trole() {\r\n\t\t\treturn this.$store.getters.role;\r\n\t\t},\r\n\t\tclasses() {\r\n\t\t\treturn this.$store.getters.classes;\r\n\t\t},\r\n\t\tteachers() {\r\n\t\t\tlet teachers = this.$store.getters.teachers;\r\n\t\t\tteachers.forEach((item) => {\r\n\t\t\t\titem.name = item.full_name;\r\n\t\t\t});\r\n\t\t\treturn teachers;\r\n\t\t},\r\n\t\tsubjects() {\r\n\t\t\treturn this.$store.getters.subjects;\r\n\t\t},\r\n\t\ttimetable() {\r\n\t\t\treturn this.$store.getters.timetable;\r\n\t\t},\r\n\t\tdate() {\r\n\t\t\tlet options = {\r\n\t\t\t\tmonth: \"numeric\",\r\n\t\t\t\tday: \"numeric\",\r\n\t\t\t};\r\n\t\t\tlet date = new Date(this.timetable.start_date);\r\n\t\t\tif (this.timetable.start_date)\r\n\t\t\t\treturn (\r\n\t\t\t\t\tdate.toLocaleString(\"ru\", options) +\r\n\t\t\t\t\t\" - \" +\r\n\t\t\t\t\tnew Date(date.setDate(date.getDate() + 7)).toLocaleString(\r\n\t\t\t\t\t\t\"ru\",\r\n\t\t\t\t\t\toptions\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\telse return \"\";\r\n\t\t},\r\n\t\tcurrentDate() {\r\n\t\t\tif (this.timetable.start_date) {\r\n\t\t\t\treturn this.timetable.start_date;\r\n\t\t\t} else {\r\n\t\t\t\treturn new Date();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync getTeachers() {\r\n\t\t\tawait this.$store.dispatch(\"get\", {\r\n\t\t\t\tgetWhat: \"teachers\",\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync getSubjects() {\r\n\t\t\tawait this.$store.dispatch(\"get\", {\r\n\t\t\t\tgetWhat: \"subjects\",\r\n\t\t\t});\r\n\t\t},\r\n\t\tclearTable() {\r\n\t\t\tfor (let key in this.lessons) {\r\n\t\t\t\tthis.lessons[key] = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync loadTimetable(direction = \"\") {\r\n\t\t\tlet monday = getMonday(direction, this.currentDate);\r\n\t\t\tawait this.$store.dispatch(\"get\", {\r\n\t\t\t\tgetWhat: \"timetable\",\r\n\t\t\t\tid: this.classesSelect,\r\n\t\t\t\tparams: { start_date: monday },\r\n\t\t\t});\r\n\t\t\tthis.getTimetable();\r\n\r\n\t\t\tfunction getMonday(direction, currentDate) {\r\n\t\t\t\tlet date = new Date(currentDate);\r\n\t\t\t\tlet day = date.getDay(),\r\n\t\t\t\t\tdiff = date.getDate() - day + (day == 0 ? -6 : 1); // adjust when day is sunday\r\n\t\t\t\tlet monday = new Date(date.setDate(diff));\r\n\t\t\t\tswitch (direction) {\r\n\t\t\t\t\tcase \"up\": {\r\n\t\t\t\t\t\tmonday = monday.addDays(7);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase \"down\": {\r\n\t\t\t\t\t\tmonday = monday.addDays(-7);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn `${monday.getFullYear()}-${\r\n\t\t\t\t\tmonday.getMonth() + 1\r\n\t\t\t\t}-${monday.getDate()}`;\r\n\t\t\t}\r\n\t\t\tDate.prototype.addDays = function (days) {\r\n\t\t\t\tvar date = new Date(this.valueOf());\r\n\t\t\t\tdate.setDate(date.getDate() + days);\r\n\t\t\t\treturn date;\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetTimetable() {\r\n\t\t\tlet i = 1;\r\n\t\t\tfor (let key in this.lessons) {\r\n\t\t\t\tthis.lessons[key] = this.getLessonsForDay(i);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLessonsForDay(weekDay) {\r\n\t\t\tlet timetable = this.$store.getters.timetable;\r\n\r\n\t\t\t// сортировка по номеру урока и фильтрация по дате\r\n\t\t\tlet lessons = timetable.lessons\r\n\t\t\t\t.filter((item) => item.week_day === weekDay)\r\n\t\t\t\t.sort((a, b) => a.lesson_number - b.lesson_number);\r\n\r\n\t\t\t// алгоритм для получения массива уроков\r\n\t\t\tfor (let i = 0; i <= lessons.length; i++) {\r\n\t\t\t\tlet numberOfLesson = i + 1;\r\n\t\t\t\tlet newLesson = {\r\n\t\t\t\t\ttimetable_id: timetable.id,\r\n\t\t\t\t\tlesson_number: numberOfLesson,\r\n\t\t\t\t\tweek_day: weekDay,\r\n\t\t\t\t\tisEmpty: true,\r\n\t\t\t\t};\r\n\t\t\t\t// если в массиве больше нет уроков\r\n\t\t\t\tif (i === lessons.length) {\r\n\t\t\t\t\tfor (let k = i; k < 8; k++) {\r\n\t\t\t\t\t\tnumberOfLesson = k + 1;\r\n\t\t\t\t\t\tnewLesson = {\r\n\t\t\t\t\t\t\ttimetable_id: timetable.id,\r\n\t\t\t\t\t\t\tlesson_number: numberOfLesson,\r\n\t\t\t\t\t\t\tweek_day: weekDay,\r\n\t\t\t\t\t\t\tisEmpty: true,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tlessons.push(newLesson);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t// обработка основного массива\r\n\t\t\t\telse {\r\n\t\t\t\t\tconst lesson = lessons[i];\r\n\t\t\t\t\tif (lesson.lesson_number !== numberOfLesson) {\r\n\t\t\t\t\t\tlessons.splice(i, 0, newLesson);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// чтоб наверняка!\r\n\t\t\t\tif (i >= 8) break;\r\n\t\t\t}\r\n\r\n\t\t\treturn lessons;\r\n\t\t},\r\n\t\tdeleteLesson() {\r\n\t\t\taxios\r\n\t\t\t\t.delete(lessonsUrl + \"/\" + this.editedItem.id, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${this.$store.getters.token}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.loadTimetable();\r\n\t\t\t\t\tthis.$store.dispatch(\"loadingOff\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.$store.dispatch(\"loadingOff\");\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\taddLesson(lesson) {\r\n\t\t\taxios\r\n\t\t\t\t.post(lessonsUrl, lesson, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: `Bearer ${this.$store.getters.token}`,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.loadTimetable();\r\n\t\t\t\t\tthis.$store.dispatch(\"loadingOff\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.$store.dispatch(\"loadingOff\");\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tmodalCancel() {\r\n\t\t\tthis.dialog = false;\r\n\t\t\tthis.modalProps = \"\";\r\n\t\t},\r\n\t\tmodalAction(data) {\r\n\t\t\tthis.dialog = false;\r\n\t\t\tthis.$store.dispatch(\"loadingOn\");\r\n\t\t\tswitch (this.action) {\r\n\t\t\t\tcase \"delete\": {\r\n\t\t\t\t\tthis.deleteLesson();\r\n\t\t\t\t\tthis.modalProps = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"add\": {\r\n\t\t\t\t\tlet lesson = {\r\n\t\t\t\t\t\ttimetable_id: this.timetable.id,\r\n\t\t\t\t\t\tteacher_id: data.teacher.value,\r\n\t\t\t\t\t\tsubject_id: data.subject.value,\r\n\t\t\t\t\t\tlesson_number: this.editedItem.lesson_number,\r\n\t\t\t\t\t\tweek_day: this.editedItem.week_day,\r\n\t\t\t\t\t\tclass_room_id: 1,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.addLesson(lesson);\r\n\t\t\t\t\tthis.modalProps = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"time\": {\r\n\t\t\t\t\t//тут надо подключить на время\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"quart\": {\r\n\t\t\t\t\t//тут на четверть\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmodalOpen(action, item = null) {\r\n\t\t\tif (item) this.editedItem = item;\r\n\t\t\tthis.action = action;\r\n\t\t\tswitch (action) {\r\n\t\t\t\tcase \"delete\": {\r\n\t\t\t\t\tthis.modalProps = {\r\n\t\t\t\t\t\ttitle: \"Удаление урока\",\r\n\t\t\t\t\t\ttext: \"Вы действительно хотите удалить этот урок  из расписания?\",\r\n\t\t\t\t\t\tactionBtnText: \"Удалить\",\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"add\": {\r\n\t\t\t\t\tthis.modalProps = {\r\n\t\t\t\t\t\ttitle: \"Добавить урок\",\r\n\t\t\t\t\t\tinputs: {\r\n\t\t\t\t\t\t\tsubject: {\r\n\t\t\t\t\t\t\t\tlabel: \"Предмет\",\r\n\t\t\t\t\t\t\t\trules: [this.modalValidateRules.required],\r\n\t\t\t\t\t\t\t\tisSearchSelect: true,\r\n\t\t\t\t\t\t\t\toptions: this.subjects,\r\n\t\t\t\t\t\t\t\tvalue: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tteacher: {\r\n\t\t\t\t\t\t\t\tlabel: \"Учитель\",\r\n\t\t\t\t\t\t\t\trules: [this.modalValidateRules.required],\r\n\t\t\t\t\t\t\t\tisSearchSelect: true,\r\n\t\t\t\t\t\t\t\toptions: this.teachers,\r\n\t\t\t\t\t\t\t\tvalue: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfilterSelect() {},\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"time\": {\r\n\t\t\t\t\tthis.modalProps = {\r\n\t\t\t\t\t\ttitle: \"Настроить время\",\r\n\t\t\t\t\t\ttimeSet: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase \"quart\": {\r\n\t\t\t\t\tthis.modalProps = {\r\n\t\t\t\t\t\ttitle: \"Настроить четверть\",\r\n\t\t\t\t\t\tactionBtnText: \"Добавить\",\r\n\t\t\t\t\t\tquartSet: true,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dialog = true;\r\n\t\t},\r\n\t\tredirectToLesson(lesson) {\r\n\t\t\tlet userId = this.$store.getters.user.id;\r\n\t\t\tif (this.role === \"student\" || userId === lesson.teacher.id)\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: \"lesson\",\r\n\t\t\t\t\tparams: { id: lesson.id },\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"./timetable.scss\";\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timetable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Timetable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Timetable.vue?vue&type=template&id=624e71e2&\"\nimport script from \"./Timetable.vue?vue&type=script&lang=js&\"\nexport * from \"./Timetable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Timetable.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VDialog,VIcon,VSelect})\n"],"sourceRoot":""}